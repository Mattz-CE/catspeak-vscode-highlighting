{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Catspeak",
  "scopeName": "source.catspeak",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#keywords" },
    { "include": "#constants" },
    { "include": "#operators" },
    { "include": "#functions" },
    { "include": "#variables" },
    { "include": "#punctuation" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-dash.catspeak",
          "match": "--.*$"
        },
        {
          "name": "comment.line.double-slash.catspeak",
          "match": "//.*$"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.catspeak",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.catspeak",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.catspeak",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.catspeak",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.verbatim.catspeak",
          "begin": "@'",
          "end": "'",
          "patterns": []
        },
        {
          "name": "string.quoted.verbatim.double.catspeak",
          "begin": "@\"",
          "end": "\"",
          "patterns": []
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.hexadecimal.catspeak",
          "match": "\\b0[xX][0-9a-fA-F_]+\\b"
        },
        {
          "name": "constant.numeric.binary.catspeak",
          "match": "\\b0[bB][01_]+\\b"
        },
        {
          "name": "constant.numeric.float.catspeak",
          "match": "\\b[0-9][0-9_]*\\.[0-9][0-9_]*([eE][+-]?[0-9_]+)?\\b"
        },
        {
          "name": "constant.numeric.integer.catspeak",
          "match": "\\b[0-9][0-9_]*\\b"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.catspeak",
          "match": "\\b(if|else|while|for|do|break|continue|return|match|with)\\b"
        },
        {
          "name": "storage.type.catspeak",
          "match": "\\b(let|fun|function)\\b"
        },
        {
          "name": "storage.modifier.catspeak",
          "match": "\\b(params)\\b"
        },
        {
          "name": "keyword.operator.logical.catspeak",
          "match": "\\b(and|or|not)\\b"
        },
        {
          "name": "keyword.operator.new.catspeak",
          "match": "\\b(new)\\b"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.true.catspeak",
          "match": "\\btrue\\b"
        },
        {
          "name": "constant.language.boolean.false.catspeak",
          "match": "\\bfalse\\b"
        },
        {
          "name": "constant.language.null.catspeak",
          "match": "\\b(undefined|Pusto)\\b"
        },
        {
          "name": "variable.language.this.catspeak",
          "match": "\\bself\\b"
        },
        {
          "name": "variable.language.global.catspeak",
          "match": "\\bglobal\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.catspeak",
          "match": "(==|!=|<=|>=|<|>)"
        },
        {
          "name": "keyword.operator.assignment.compound.catspeak",
          "match": "(\\+=|-=|\\*=|/=|%=|\\|\\|=|&&=)"
        },
        {
          "name": "keyword.operator.assignment.catspeak",
          "match": "="
        },
        {
          "name": "keyword.operator.arithmetic.catspeak",
          "match": "(\\+|-|\\*|/|%|\\^)"
        },
        {
          "name": "keyword.operator.logical.catspeak",
          "match": "(\\|\\||&&|!)"
        },
        {
          "name": "keyword.operator.accessor.catspeak",
          "match": "\\."
        },
        {
          "name": "keyword.operator.ternary.catspeak",
          "match": "\\?"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "name": "entity.name.function.catspeak",
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()",
          "captures": {
            "1": { "name": "entity.name.function.catspeak" }
          }
        },
        {
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*=\\s*fun\\b",
          "captures": {
            "1": { "name": "entity.name.function.definition.catspeak" }
          }
        },
        {
          "name": "support.function.builtin.catspeak",
          "match": "\\b(show_message|asset_get_index|date_create_datetime|txt|create_notification|delay_action|mods_notify|mods_create_company|mod_register_func|mod_register_trait|new_trait|portrait_part_register|portrait_extra_register|generate_company|company_info_reset|change_friend|calc_price_human|draw_portrait|draw_text|draw_sprite|draw_rectangle|draw_set_color|draw_set_font|draw_set_alpha|irandom|random|floor|ceil|round|abs|sign|min|max|clamp|lerp|string|real|array_length|array_push|array_pop|ds_list_create|ds_list_add|ds_list_size|ds_map_create|ds_map_add|ds_map_find_value|instance_create|instance_destroy|room_goto|audio_play_sound|audio_stop_sound)\\b"
        }
      ]
    },
    "variables": {
      "patterns": [
        {
          "name": "variable.other.property.catspeak",
          "match": "(?<=\\.)([a-zA-Z_][a-zA-Z0-9_]*)"
        },
        {
          "name": "variable.other.object.catspeak",
          "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=:)",
          "captures": {
            "1": { "name": "variable.other.object.property.catspeak" }
          }
        },
        {
          "name": "variable.other.catspeak",
          "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
        }
      ]
    },
    "punctuation": {
      "patterns": [
        {
          "name": "punctuation.definition.block.catspeak",
          "match": "[{}]"
        },
        {
          "name": "punctuation.definition.array.catspeak",
          "match": "[\\[\\]]"
        },
        {
          "name": "punctuation.definition.parameters.catspeak",
          "match": "[()]"
        },
        {
          "name": "punctuation.separator.catspeak",
          "match": "[,;:]"
        }
      ]
    }
  }
}
